{% extends 'base.html.twig' %}

{% block title %}Hello CategoryController!
{% endblock %}

{% block body %}
	<table class="table table-bordered table-striped table-hover mt-4v w-50 mx-auto">
		<thead class="table-dark">
			<tr>
				<th>ID</th>
				<th>Name</th>
				<th>Created At</th>
				<th>Updated At</th>
				<th>Edit</th>
				<th>Delete</th>
			</tr>
		</thead>
		<tbody>
			{% for user in users %}
				<tr>
					<td>{{ user.id }}</td>
					<td style="color: {{ 'ROLE_SUPER_ADMIN' in user.roles ? 'red' : 'inherit' }}">
						{{ user.username }}
					</td>
					<td>{{ user.createdAt ? user.createdAt|date('Y-m-d H:i') : '' }}</td>
					<td>{{ user.updatedAt ? user.updatedAt|date('Y-m-d H:i') : '' }}</td>
					<td>
						<a href="{{ path('category_edit', { id: user.id }) }}" class="btn btn-sm btn-primary">
							Edit
						</a>
					</td>

					<td>
						{% if is_granted('ROLE_SUPER_ADMIN') and user.username != 'Ernest'  %}

							<form method="post" action="{{ path('category_delete', { id: user.id }) }}" onsubmit="return confirm('Are you sure?');">
								<input type="hidden" name="_token" value="{{ csrf_token('delete' ~ user.id) }}">
								<button class="btn btn-sm btn-danger">Delete</button>
							</form>
						{% endif %}
					</td>
				</tr>
			{% else %}
				<tr>
					<td colspan="6" class="text-center">No items found.</td>
				</tr>
			{% endfor %}
		</tbody>
	</table>

{% endblock %}
