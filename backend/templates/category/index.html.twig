{% extends 'base.html.twig' %}

{% block title %}Hello CategoryController!
{% endblock %}

{% block body %}

	{% include 'message.html.twig' with {'flash': app.flashes} %}

	{% include 'export_button.html.twig' with {'entity': 'categories'} %}
	<div class="text-center mb-5">
		<a href="{{ path('category_create') }}" class="btn btn-success mb-3 mt-3 mx-auto text-center">Create New Category</a>
	</div>
	<table class="table table-bordered table-striped table-hover mt-4v w-50 mx-auto">
		<thead class="table-dark">
			<tr>
				<th>ID</th>
				<th>Name</th>
				<th>Created At</th>
				<th>Updated At</th>
				<th>Edit</th>
				<th>Delete</th>
			</tr>
		</thead>
		<tbody>
			{% for category in categories %}
				<tr>
					<td>{{ category.id }}</td>
					<td>{{ category.name }}</td>
					<td>{{ category.createdAt ? category.createdAt|date('Y-m-d H:i') : '' }}</td>
					<td>{{ category.updatedAt ? category.updatedAt|date('Y-m-d H:i') : '' }}</td>
					<td>
						<a href="{{ path('category_edit', { id: category.id }) }}" class="btn btn-sm btn-primary">
							Edit
						</a>
					</td>
					<td>
						<form method="post" action="{{ path('category_delete', { id: category.id }) }}" onsubmit="return confirm('Are you sure?');">
							<input type="hidden" name="_token" value="{{ csrf_token('delete' ~ category.id) }}">
							<button class="btn btn-sm btn-danger">Delete</button>
						</form>
					</td>
				</tr>
			{% else %}
				<tr>
					<td colspan="6" class="text-center">No items found.</td>
				</tr>
			{% endfor %}
		</tbody>
	</table>

{% endblock %}
